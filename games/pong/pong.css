
:root {
  --pong-bg:#0b0f14;
  --pong-fg:#e8f1ff;
  --pong-accent:#69e1ff;
  --pong-muted:#7a8aa0;
  --pong-good:#45e27b;
  --pong-bad:#ff6b6b;
  --pong-grid:#132033;
  --pong-glow: rgba(105,225,255,0.28);
}

/* THEME: Neon */
.theme-neon {
  --pong-bg:#05070c;
  --pong-fg:#e7f7ff;
  --pong-accent:#69e1ff;
  --pong-grid:#112038;
}
/* THEME: Vapor */
.theme-vapor {
  --pong-bg:#0b0012;
  --pong-fg:#ffe8ff;
  --pong-accent:#ff66cc;
  --pong-grid:#2a0a3a;
  --pong-glow: rgba(255,102,204,0.28);
}
/* THEME: Classic CRT */
.theme-crt {
  --pong-bg:#000000;
  --pong-fg:#e0ffe0;
  --pong-accent:#7cff7c;
  --pong-grid:#002200;
  --pong-glow: rgba(124,255,124,0.18);
}
/* THEME: Minimal Light */
.theme-minimal {
  --pong-bg:#f7f8fb;
  --pong-fg:#0b1220;
  --pong-accent:#2b6cff;
  --pong-grid:#e6e9f2;
  --pong-glow: rgba(43,108,255,0.12);
}

* { box-sizing: border-box; }
.pong-root{background:var(--pong-bg); color:var(--pong-fg); margin:0; min-height:100svh; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";}
.pong-bg-canvas{position:fixed; inset:0; width:100vw; height:100vh; pointer-events:none; display:block; z-index:0;}
.pong-app{display:grid; grid-template-rows:auto 1fr auto; min-height:100svh; position:relative; z-index:1;}

.pong-bar{display:flex; align-items:center; gap:.5rem; padding:.75rem 1rem; border-bottom:1px solid #1b2533;}
.pong-title{font-weight:800; letter-spacing:.3px;}
.pong-spacer{flex:1}
.pong-kbd{padding:.15rem .4rem; border:1px solid #324356; border-bottom-width:2px; border-radius:.35rem; background:#0e1622; font-size:.85rem}

.pong-btn{cursor:pointer; border:1px solid #243043; background:#111a28; color:var(--pong-fg); border-radius:.6rem; padding:.5rem .8rem; font:inherit}
.pong-btn:hover{background:#172334}
.pong-btn[aria-pressed="true"]{outline:2px solid var(--pong-accent); box-shadow:0 0 0 6px var(--pong-glow);}

.pong-canvas-wrap{display:grid; place-items:center; padding:10px; position:relative}
.pong-canvas{width:100%; max-width:1100px; aspect-ratio:16/9; touch-action:none; background:var(--pong-bg); border-radius:16px; box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.03);}

.pong-overlay{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none; opacity:0; transition:opacity .22s ease-in-out;}
.pong-overlay.show{opacity:1; pointer-events:auto;}
.pong-overlay__panel{display:none; flex-direction:column; gap:0.75rem; padding:1.5rem; border-radius:18px; max-width:min(420px, 92%); background:rgba(9,15,26,0.9); border:1px solid rgba(105,225,255,0.25); box-shadow:0 18px 46px rgba(0,0,0,0.55); text-align:center;}
.pong-overlay[data-scene="title"] .pong-overlay__panel[data-scene="title"],
.pong-overlay[data-scene="pause"] .pong-overlay__panel[data-scene="pause"],
.pong-overlay[data-scene="gameover"] .pong-overlay__panel[data-scene="gameover"]{display:flex;}
.pong-overlay__heading{font-size:1.4rem; font-weight:700; margin:0;}
.pong-overlay__text{margin:0; font-size:1rem; color:var(--pong-muted);}
.pong-overlay__score{margin:0; font-weight:700; font-size:1.1rem; color:var(--pong-fg);}
.pong-overlay__actions{display:flex; flex-wrap:wrap; gap:0.5rem; justify-content:center; margin-top:0.5rem;}
.pong-overlay__btn{cursor:pointer; border:1px solid #243043; background:#111a28; color:var(--pong-fg); border-radius:.6rem; padding:.5rem .9rem; font:inherit; min-width:120px; transition:background .15s ease-in-out;}
.pong-overlay__btn:hover{background:#172334;}

.pong-hud{display:flex; flex-direction:column; align-items:center; gap:.35rem; padding:.5rem 0; font-weight:700}
.pong-status{display:flex; align-items:center; justify-content:space-between; gap:1rem; width:min(720px,100%); text-transform:none}
.pong-status__left{display:flex; flex-direction:column; gap:.1rem; font-size:.85rem; color:var(--pong-muted); flex:1}
.pong-status__mode{font-size:1rem; font-weight:700; color:var(--pong-fg)}
.pong-status__tier{font-weight:600; color:var(--pong-muted)}
.pong-status__score{display:flex; align-items:center; justify-content:center; gap:.65rem; font-size:1.45rem; font-weight:700; color:var(--pong-fg); flex:1}
.pong-status__right{font-size:.85rem; color:var(--pong-muted); min-width:110px; text-align:right; flex:1; display:flex; justify-content:flex-end; align-items:center}
.pong-status__combo{font-weight:600; transition:color .2s ease-in-out}
.pong-status__combo.is-hot{color:var(--pong-accent)}
.pong-score{font-size:inherit}
.pong-mid{color:var(--pong-muted)}
.pong-stamina{display:flex; gap:.75rem; width:min(720px,100%); opacity:.95; transition:opacity .2s ease-in-out}
.pong-stamina:not(.is-active){opacity:.35}
.pong-stamina__track{flex:1; position:relative; height:8px; border-radius:999px; background:rgba(255,255,255,0.08); overflow:hidden}
.pong-stamina__track[data-side="p1"]{--bar-color:rgba(105,225,255,0.9)}
.pong-stamina__track[data-side="p2"]{--bar-color:rgba(255,153,102,0.85)}
.pong-stamina__fill{--fill:1; position:absolute; inset:0; width:calc(var(--fill,1) * 100%); background:var(--bar-color, var(--pong-accent)); border-radius:inherit; transition:width .18s ease-out}

.pong-menu{padding:.75rem 1rem; border-top:1px solid #1b2533; display:flex; gap:.5rem; flex-wrap:wrap; align-items:flex-start}
.pong-menu__section{flex:1 1 360px; display:flex; flex-direction:column; gap:.5rem; padding:.5rem 0; min-width:min(360px,100%)}
.pong-textarea{width:100%; min-height:180px; resize:vertical; background:#131a24; color:var(--pong-fg); border:1px solid #243043; border-radius:.6rem; padding:.6rem; font:0.85rem/1.5 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
.pong-textarea:focus-visible{outline:2px solid var(--pong-accent); box-shadow:0 0 0 4px var(--pong-glow)}
.pong-textarea.is-error{border-color:var(--pong-bad); box-shadow:0 0 0 4px rgba(255,107,107,0.25)}
.pong-hint{font-size:0.85rem; color:var(--pong-muted); max-width:60ch}
.pong-hint.success{color:var(--pong-good)}
.pong-hint.error{color:var(--pong-bad)}
.pong-select,.pong-input{background:#131a24; color:var(--pong-fg); border:1px solid #243043; border-radius:.5rem; padding:.5rem .6rem; font:inherit}
.pong-row{display:flex; align-items:center; gap:.5rem; flex-wrap:wrap}

.pong-modal{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.5); backdrop-filter: blur(4px);}
.pong-modal.show{display:grid}
.pong-card{min-width:min(700px, 95vw); max-width:95vw; background:#0e1622; border:1px solid #243043; border-radius:12px; padding:1rem; box-shadow: 0 10px 40px rgba(0,0,0,.55);}

.pong-diag{position:fixed; inset:auto 12px 12px auto; width:min(520px, 95vw); max-height:60vh; overflow:auto; background:#0e1622; border:1px solid #243043; border-radius:12px; padding:.75rem; display:none; white-space:pre-wrap}
.pong-diag.show{display:block}
.pong-diag pre{white-space:pre-wrap;}

.pong-debug{position:fixed;left:12px;bottom:12px;min-width:200px;padding:0.65rem 0.8rem;border-radius:12px;border:1px solid #243043;background:rgba(8,12,20,0.82);box-shadow:0 12px 30px rgba(0,0,0,.4);font:600 .85rem/1.45 "Inter",system-ui,-apple-system,"Segoe UI",sans-serif;color:var(--pong-fg);display:none;pointer-events:none;white-space:pre-wrap;backdrop-filter:blur(6px);}
.pong-debug.show{display:block}
.pong-debug__title{font-weight:700;font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;margin:0 0 .25rem;color:var(--pong-muted);}
.pong-debug__body{margin:0;font:inherit;white-space:pre-wrap;}

.touch-hint{display:none}
@media (pointer: coarse) {
  .touch-hint{display:inline; color:var(--pong-muted); font-size:.9rem}
}

/* Optional CRT scanlines for theme-crt */
.theme-crt .pong-canvas {
  position: relative;
  overflow: hidden;
}
.theme-crt .pong-canvas::after{
  content:""; position:absolute; inset:0;
  background: repeating-linear-gradient(to bottom, rgba(255,255,255,0.05), rgba(255,255,255,0.05) 2px, transparent 2px, transparent 4px);
  pointer-events:none; mix-blend-mode: overlay;
  opacity:.4;
}
